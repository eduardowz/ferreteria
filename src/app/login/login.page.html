<ion-content [fullscreen]="true" class="login-background">
  <div class="login-container">
    <div class="login-card">
      <!-- Logo y título -->
      <div class="logo-section">
        <div class="logo-wrapper">
          <ion-img src="assets/ferreteria.png" class="logo" alt="Logo Ferretería X"></ion-img>
        </div>
        <h1 class="login-title">Ferretería X</h1>
        <p class="login-subtitle">{{ loginType === 'admin' ? 'Panel de Administración' : 'Portal de Usuario' }}</p>
      </div>

      <!-- Selector de tipo de entrada -->
      <ion-segment [(ngModel)]="loginType" class="login-type-segment">
        <ion-segment-button value="admin">
          <ion-label>Administrador</ion-label>
          <ion-icon name="settings-outline"></ion-icon>
        </ion-segment-button>
        <ion-segment-button value="user">
          <ion-label>Usuario</ion-label>
          <ion-icon name="person-outline"></ion-icon>
        </ion-segment-button>
      </ion-segment>

      <!-- Información de credenciales de prueba -->
      <ion-card class="demo-credentials" *ngIf="loginType">
        <ion-card-header>
          <ion-card-title class="demo-title">
            <ion-icon name="information-circle-outline"></ion-icon>
            Credenciales de Prueba
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div *ngIf="loginType === 'admin'" class="credential-info">
            <p><strong>Email:</strong> admin&#64;ferreteria.com</p>
            <p><strong>Contraseña:</strong> admin123</p>
          </div>
          <div *ngIf="loginType === 'user'" class="credential-info">
            <p><strong>Email:</strong> usuario&#64;test.com</p>
            <p><strong>Contraseña:</strong> user123</p>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Formulario de login -->
      <form class="login-form" #loginForm="ngForm">
        <!-- Campo de correo electrónico -->
        <ion-item lines="full" class="form-item">
          <ion-input
            [(ngModel)]="email"
            name="email"
            type="email"
            required
            placeholder="Correo Electrónico"
            class="custom-input"
          ></ion-input>
          <ion-icon name="mail-outline" slot="start"></ion-icon>
        </ion-item>

        <!-- Campo de contraseña -->
        <ion-item lines="full" class="form-item">
          <ion-input
            [(ngModel)]="password"
            name="password"
            [type]="showPassword ? 'text' : 'password'"
            required
            placeholder="Contraseña"
            class="custom-input"
          ></ion-input>
          <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
          <ion-button 
            fill="clear" 
            slot="end" 
            (click)="togglePasswordVisibility()"
            class="password-toggle-btn"
            type="button"
          >
            <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-item>

        <!-- Botón de login -->
        <ion-button
          expand="block"
          (click)="login()"
          class="login-button"
          [disabled]="!isFormValid()"
          [color]="loginType === 'admin' ? 'danger' : 'primary'"
          type="button"
        >
          <ion-icon 
            [name]="loginType === 'admin' ? 'shield-checkmark-outline' : 'log-in-outline'" 
            slot="start"
          ></ion-icon>
          {{ loginType === 'admin' ? 'Acceso Administrador' : 'Acceso Usuario' }}
        </ion-button>
      </form>

      <!-- Enlaces adicionales para usuarios -->
      <div class="additional-links" *ngIf="loginType === 'user'">
        <ion-button fill="clear" class="link-button" (click)="forgotPassword()">
          <ion-icon name="help-circle-outline" slot="start"></ion-icon>
          ¿Olvidaste tu contraseña?
        </ion-button>
        <ion-button fill="clear" class="link-button" (click)="createAccount()">
          <ion-icon name="person-add-outline" slot="start"></ion-icon>
          Crear cuenta nueva
        </ion-button>
      </div>

      <!-- Mensaje de error -->
      <ion-text *ngIf="errorMessage" class="error-message">
        <ion-icon name="alert-circle-outline"></ion-icon>
        <p>{{ errorMessage }}</p>
      </ion-text>

      <!-- Información sobre roles -->
      <ion-card class="role-info">
        <ion-card-content>
          <div class="role-description">
            <h3>{{ loginType === 'admin' ? 'Administrador' : 'Usuario' }}</h3>
            <ul *ngIf="loginType === 'admin'">
              <li>Gestión completa de productos</li>
              <li>Agregar, editar y eliminar productos</li>
              <li>Gestión de proveedores</li>
              <li>Acceso a todas las funcionalidades</li>
            </ul>
            <ul *ngIf="loginType === 'user'">
              <li>Visualización de catálogo de productos</li>
              <li>Agregar productos al carrito</li>
              <li>Gestión de pedidos</li>
              <li>Perfil de usuario</li>
            </ul>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>

  <!-- Footer -->
  <div class="login-footer">
    <div class="footer-content">
      <p class="footer-text">© 2025 Ferretería X - Todos los derechos reservados</p>
      <p class="footer-version">Versión 1.0.0</p>
    </div>
  </div>
</ion-content>